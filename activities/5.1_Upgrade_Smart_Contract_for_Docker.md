# Tên công việc: Nâng cấp Smart Contract để hỗ trợ Job phức tạp (Docker & IPFS)

- **Người thực hiện (Implemented by):** Khánh
- **Liên quan đến Giai đoạn (Related to Phase):** 5.1

---

## 📝 Kế hoạch thực thi (Execution Plan)

**1. Mục tiêu (Goal):**
*   Nâng cấp chương trình on-chain `compute-share` để hỗ trợ các công việc phức tạp, sử dụng kiến trúc metadata linh hoạt dựa trên "tags" để mô tả công việc và yêu cầu phần cứng.

**2. Lý do (Reason):**
*   Mô hình 32-byte cũ quá giới hạn. Kiến trúc tag-based mới cho phép Renter mô tả chính xác họ cần gì, và Provider có thể lọc job hiệu quả, mở khóa các trường hợp sử dụng giá trị cao.

**3. Các bước thực hiện (Steps):**

*   **Bước 1: Cập nhật `lib.rs` - Định nghĩa cấu trúc dữ liệu cuối cùng**
    *   Tạo `pub enum ExecutionEngine { Docker }`.
    *   Sửa đổi `JobAccount` để bao gồm các trường: `engine: ExecutionEngine`, `job_details: String`, `results: String`, `job_tags: Vec<String>`, và `hardware_tags: Vec<String>`.
    *   Xóa các trường cũ không còn cần thiết.

*   **Bước 2: Cập nhật `lib.rs` - Sửa đổi Instructions**
    *   **`create_job`**: Thay đổi tham số để nhận `job_details: String`, `job_tags: Vec<String>`, và `hardware_tags: Vec<String>`.
    *   **`submit_results`**: Thay đổi tham số để nhận `results: String`.

*   **Bước 3: Tạo `specs/tags_dictionary.md`**
    *   Tạo một file mới để định nghĩa bộ từ vựng chuẩn cho `job_tags` và `hardware_tags`.

*   **Bước 4: Cập nhật `tests/compute-share.ts` - Viết lại Unit Tests**
    *   Viết lại toàn bộ các bài test để phù hợp với cấu trúc `JobAccount` mới và các tham số instruction đã thay đổi, sử dụng các tags từ từ điển.

*   **Bước 5: Xác minh**
    *   Chạy `anchor build` và `anchor test` để đảm bảo mọi thứ hoạt động chính xác.

---

## 🚀 Quy trình thực hiện (Implementation Process)

- **Trạng thái:** Đang thực hiện.
- **Cập nhật:**
    - [x] **Bước 1: Cập nhật `lib.rs` - Định nghĩa cấu trúc dữ liệu mới:** Đã có code mẫu cho `ExecutionEngine` và `JobAccount` mới.
    - [x] **Bước 2: Cập nhật `lib.rs` - Sửa đổi Instructions:** Đã có code mẫu cho `create_job` và `submit_results` đã được sửa đổi.
    - [ ] **Bước 3: Cập nhật `tests/compute-share.ts` - Viết lại Unit Tests:** Đây là bước tiếp theo.
    - [ ] **Bước 4: Xác minh**