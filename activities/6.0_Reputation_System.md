# 6.0: X√¢y d·ª±ng H·ªá th·ªëng Uy t√≠n (Reputation System)

- **Ng∆∞·ªùi th·ª±c hi·ªán (Implemented by):** Gemini & Kh√°nh
- **Li√™n quan ƒë·∫øn Giai ƒëo·∫°n (Related to Phase):** 6

---

## üìù K·∫ø ho·∫°ch th·ª±c thi (Execution Plan)

*Ph·∫ßn n√†y m√¥ t·∫£ k·∫ø ho·∫°ch chi ti·∫øt s·∫Ω ƒë∆∞·ª£c th·ª±c hi·ªán. C√¥ng vi·ªác s·∫Ω ch·ªâ b·∫Øt ƒë·∫ßu sau khi b·∫°n ƒë·ªìng √Ω v·ªõi k·∫ø ho·∫°ch n√†y.*

**1. M·ª•c ti√™u (Goal):**
*   Implement to√†n b·ªô logic on-chain cho h·ªá th·ªëng "treo gi√≤" (ban) v√† ho√†n thi·ªán lu·ªìng x·ª≠ l√Ω job. Bao g·ªìm c√°c task t·ª´ **6.1 ƒë·∫øn 6.4**.

**2. L√Ω do (Reason):**
*   Ho√†n th√†nh tr·ªçn v·∫πn ph·∫ßn on-chain s·∫Ω t·∫°o ra m·ªôt phi√™n b·∫£n smart contract c√≥ ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng, s·∫µn s√†ng cho vi·ªác c·∫≠p nh·∫≠t client v√† ki·ªÉm th·ª≠ ·ªü c√°c b∆∞·ªõc sau.

**3. C√°c b∆∞·ªõc th·ª±c hi·ªán (Steps):**
*   **B∆∞·ªõc 0: T√°i c·∫•u tr√∫c (Refactor) `JobAccount` PDA:**
    *   Thay ƒë·ªïi `seeds` c·ªßa `JobAccount` t·ª´ `[b"job", renter, job_id]` th√†nh `[b"job", job_id]`.
    *   C·∫≠p nh·∫≠t l·∫°i t·∫•t c·∫£ c√°c Contexts (`CreateJob`, `AcceptJob`, `SubmitResults`, v.v.) ƒë·ªÉ s·ª≠ d·ª•ng `seeds` m·ªõi.
*   **B∆∞·ªõc 1: C·∫≠p nh·∫≠t Structs:**
    *   Trong `Provider`, th√™m: `jobs_completed: u64`, `jobs_failed: u64`, `banned_until: i64`.
    *   Trong `JobAccount`, th√™m: `max_duration: i64`, `submission_deadline: i64`.
*   **B∆∞·ªõc 2: C·∫≠p nh·∫≠t Instructions hi·ªán c√≥:**
    *   `provider_register`: Kh·ªüi t·∫°o c√°c tr∆∞·ªùng m·ªõi c·ªßa `Provider` b·∫±ng 0.
    *   `create_job`: Th√™m tham s·ªë `max_duration` v√† l∆∞u v√†o `JobAccount`.
    *   `accept_job`: Th√™m logic ki·ªÉm tra `banned_until` v√† t√≠nh `submission_deadline`.
    *   `verify_results`: Th√™m logic tƒÉng `jobs_completed` (khi th√†nh c√¥ng) ho·∫∑c g·ªçi logic ph·∫°t (khi th·∫•t b·∫°i), ƒë·ªìng th·ªùi reset `provider.status`.
*   **B∆∞·ªõc 3: T·∫°o Logic Ph·∫°t T√°i s·ª≠ d·ª•ng:**
    *   T·∫°o m·ªôt h√†m n·ªôi b·ªô `apply_penalty(provider: &mut Account<Provider>)` ch·ª©a logic: tƒÉng `jobs_failed`, t√≠nh `ban_duration` theo t·ª∑ l·ªá, v√† c·∫≠p nh·∫≠t `banned_until`. H√†m n√†y c≈©ng s·∫Ω reset `provider.status`.
*   **B∆∞·ªõc 4: T·∫°o Instructions M·ªõi:**
    *   T·∫°o instruction `cancel_job` (v√† context `CancelJob`) cho ph√©p Renter h·ªßy job khi ·ªü tr·∫°ng th√°i `Pending`.
    *   T·∫°o instruction `reclaim_job` (v√† context `ReclaimJob`) cho ph√©p Renter ph·∫°t Provider khi qu√° `submission_deadline`. Instruction n√†y s·∫Ω g·ªçi h√†m `apply_penalty`.

---

## üöÄ Quy tr√¨nh th·ª±c hi·ªán (Implementation Process)

- **Tr·∫°ng th√°i:** ƒêang ch·ªù ph√™ duy·ªát k·∫ø ho·∫°ch m·ªü r·ªông.

---
